#!/usr/bin/env bash
set -euo pipefail

## Listen for monitor hotplug events and re-bind workspaces 6-10
## to the external monitor.

SOCKET="$XDG_RUNTIME_DIR/hypr/$HYPRLAND_INSTANCE_SIGNATURE/.socket2.sock"

socat -U - "UNIX-CONNECT:$SOCKET" | while read -r line; do
	if [[ "$line" == monitoradded* ]]; then
		sleep 1
		~/.config/hypr/scripts/bind_workspaces
	fi
done

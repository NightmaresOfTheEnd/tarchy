#!/usr/bin/env bash

## Script for toggling Hyprland animations

# Check actual Hyprland animation state
is_enabled() {
	local val
	val=$(hyprctl -j getoption animations:enabled 2>/dev/null | jq -r '.int // 1')
	[[ "$val" == "1" ]]
}

# Toggle animations
toggle_animations() {
	if is_enabled; then
		hyprctl --batch "keyword animations:enabled false; keyword animation fadeLayers,0; keyword animation fadeLayersIn,0; keyword animation fadeLayersOut,0"
	else
		hyprctl --batch "keyword animations:enabled true; keyword animation fadeLayers,1,8,default; keyword animation fadeLayersIn,1,8,default; keyword animation fadeLayersOut,1,8,default"
	fi
}

# Show info (format: text\ntooltip\nclass)
show_info() {
	if is_enabled; then
		echo -e "󰳑\nAnimations ON\non"
	else
		echo -e "󰳒\nAnimations OFF\noff"
	fi
}

# Main
if [[ "${1:-}" == "--toggle" ]]; then
	toggle_animations
else
	show_info
fi
